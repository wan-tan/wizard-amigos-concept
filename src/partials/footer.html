</div><!-- animsition end -->

  <script src="https://www.youtube.com/player_api"></script>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="https://use.fontawesome.com/503e9375ae.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animsition/4.0.2/js/animsition.min.js"></script>
  <script src="http://dev/wizardAmigosConcept/build/js/bundle.js"></script>




<script>
    var playlistMeta = [
        {"title": "Welcome to Wizard Amigos!", "desc":"This is a eLearning platform for our community of freelance programmers, the coding amigos! We meet up twice a week (Tuesday & Friday from 7PM to open end) at Co.Up in Berlin-Kreuzberg to work, talk, inspire and learn from each other.<br/><br/>In the next videos we will guide you from the very beginnings of internet literacy to becoming coding wizard."},
        {"title": "Create Gmail account", "desc" : ""},
        {"title": "Install Google Chrome Browser", "desc" : ""},
        {"title": "Chrome Profile and Bookmark bar", "desc" : ""},
        {"title": "Create a Github Profile", "desc" : ""},
        {"title": "Create a funky avatar", "desc" : ""},
        {"title": "Google Translate and Wikipedia", "desc" : ""},
        {"title": "Github Gists", "desc" : ""},
        {"title": "Type with all 10 fingers", "desc" : ""},
        {"title": "Create a screencast using Screencastify", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "Typing special characters", "desc" : ""},
        {"title": "Shortcuts for special characters", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "Theory (strings, numbers, variables, while loop)", "desc" : ""},
        {"title": "Theory (JS console)", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "Theory (conditions and comparissons)", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""},
        {"title": "", "desc" : ""}

    ]

    function hideChat(){
        $("#chat").toggleClass("disabled-chat")
        $("#content").toggleClass("disabled-chat")
        $("#toggle-chat").toggleClass("disabled-chat")
    }

    function hideNav(){
        $("#nav").toggleClass("disabled-nav")
        $("#content").toggleClass("disabled-nav")
        $("#map").toggleClass("disabled-nav")
        $("#toggle-nav").toggleClass("disabled-nav")
    }

    $(document).ready(function() {

      /* ANIMSITION INIT */
      $(".animsition").animsition({
        inClass: 'fade-in',
        outClass: 'fade-out',
        inDuration: 1500,
        outDuration: 800,
        linkElement: '.animsition-link',
        // e.g. linkElement: 'a:not([target="_blank"]):not([href^="#"])'
        loading: true,
        loadingParentElement: 'body', //animsition wrapper element
        loadingClass: 'animsition-loading',
        loadingInner: '', // e.g '<img src="loading.svg" />'
        timeout: false,
        timeoutCountdown: 5000,
        onLoadEvent: true,
        browser: [ 'animation-duration', '-webkit-animation-duration'],
        // "browser" option allows you to disable the "animsition" in case the css property in the array is not supported by your browser.
        // The default setting is to disable the "animsition" in a browser that does not support "animation-duration".
        overlay : false,
        overlayClass : 'animsition-overlay-slide',
        overlayParentElement : 'body',
        transition: function(url){ window.location.href = url; }
      });
      /* ANIMSITION INIT */
    });


    // create youtube player
    var player;
    function onYouTubePlayerAPIReady() {
      player = new YT.Player('player', {
        // height: '390',
        // width: '640',
        // videoId: '-YzMiTUjUZw',
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerReady(event) {
      getYoutubePlaylist()
      loadVideo()
    }

    function onPlayerStateChange(event) {
        if(event.data === 0) {
            nextVideo();
        }
    }



    var playlistData;
    var playlist = [];
    var playlistCursor = 0;


    function getYoutubePlaylist(){
      $.get( "https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=PLbtP2pUMT_hukdtCayfrk592awflW5GEe&key=AIzaSyA7fefWbbJbbO3_iogXyki31Va_mxsH7_4", function( data ) {
        // console.log(data)
        playlistData = data
        // playlistData = JSON.parse(data);
        for (i in playlistData.items){
          playlist.push(playlistData.items[i].snippet.resourceId.videoId)
        }
        player.cueVideoById(playlist[0])
      });
    }

    function loadVideo(){
        player.cueVideoById(playlist[playlistCursor])
        $(".title").html("<h1>"+playlistMeta[playlistCursor].title+"</h1>");
        $(".description").html("<p>"+playlistMeta[playlistCursor].desc+"</p>");
    }

    function nextVideo(){
      if(playlistCursor < playlist.length - 1){
        playlistCursor++
        loadVideo()
      }
    }

    function prevVideo(){
      if(playlistCursor >= 1){
        playlistCursor--
        loadVideo()
      }
    }

    function gotoVideo(target){
        playlistCursor = target
        loadVideo()
        closeIndex()
    }

    function openIndex(){
        $(".modal-index").toggleClass("modal-index-active");
        $(".modal-bg").toggleClass("modal-index-active");
        var dom = "<ul>"
        for (x in playlistMeta){
            dom += "<li onclick='gotoVideo(" + x + ")'>"+ x + " &nbsp; - &nbsp; " + playlistMeta[x].title + "</li>"
        }
        dom += "</ul>"
        $(".modal-index").html(dom)


        for(i = 0; i < playlistData.items.length; i++){
            console.log(playlistData.items[i].snippet.title)
        }
    }

    function closeIndex(){
        $(".modal-index").toggleClass("modal-index-active");
        $(".modal-bg").toggleClass("modal-index-active");
    }

    function toggleMap(){
      $("#map").toggleClass("open-map");
    }
  </script>
</body>
</html>
